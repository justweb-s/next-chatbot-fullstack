"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/chat/[chatId]/generate/route";
exports.ids = ["app/api/chat/[chatId]/generate/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2F%5BchatId%5D%2Fgenerate%2Froute&page=%2Fapi%2Fchat%2F%5BchatId%5D%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2F%5BchatId%5D%2Fgenerate%2Froute.ts&appDir=c%3A%5CUsers%5Cmledd%5CCascadeProjects%5Cnext-chatbot-fullstack%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=c%3A%5CUsers%5Cmledd%5CCascadeProjects%5Cnext-chatbot-fullstack&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2F%5BchatId%5D%2Fgenerate%2Froute&page=%2Fapi%2Fchat%2F%5BchatId%5D%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2F%5BchatId%5D%2Fgenerate%2Froute.ts&appDir=c%3A%5CUsers%5Cmledd%5CCascadeProjects%5Cnext-chatbot-fullstack%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=c%3A%5CUsers%5Cmledd%5CCascadeProjects%5Cnext-chatbot-fullstack&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var c_Users_mledd_CascadeProjects_next_chatbot_fullstack_src_app_api_chat_chatId_generate_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/chat/[chatId]/generate/route.ts */ \"(rsc)/./src/app/api/chat/[chatId]/generate/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/chat/[chatId]/generate/route\",\n        pathname: \"/api/chat/[chatId]/generate\",\n        filename: \"route\",\n        bundlePath: \"app/api/chat/[chatId]/generate/route\"\n    },\n    resolvedPagePath: \"c:\\\\Users\\\\mledd\\\\CascadeProjects\\\\next-chatbot-fullstack\\\\src\\\\app\\\\api\\\\chat\\\\[chatId]\\\\generate\\\\route.ts\",\n    nextConfigOutput,\n    userland: c_Users_mledd_CascadeProjects_next_chatbot_fullstack_src_app_api_chat_chatId_generate_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/chat/[chatId]/generate/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjaGF0JTJGJTVCY2hhdElkJTVEJTJGZ2VuZXJhdGUlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmNoYXQlMkYlNUJjaGF0SWQlNUQlMkZnZW5lcmF0ZSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmNoYXQlMkYlNUJjaGF0SWQlNUQlMkZnZW5lcmF0ZSUyRnJvdXRlLnRzJmFwcERpcj1jJTNBJTVDVXNlcnMlNUNtbGVkZCU1Q0Nhc2NhZGVQcm9qZWN0cyU1Q25leHQtY2hhdGJvdC1mdWxsc3RhY2slNUNzcmMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPWMlM0ElNUNVc2VycyU1Q21sZWRkJTVDQ2FzY2FkZVByb2plY3RzJTVDbmV4dC1jaGF0Ym90LWZ1bGxzdGFjayZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUM0RDtBQUN6STtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtY2hhdGJvdC1mdWxsc3RhY2svPzU4YjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiYzpcXFxcVXNlcnNcXFxcbWxlZGRcXFxcQ2FzY2FkZVByb2plY3RzXFxcXG5leHQtY2hhdGJvdC1mdWxsc3RhY2tcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcY2hhdFxcXFxbY2hhdElkXVxcXFxnZW5lcmF0ZVxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvY2hhdC9bY2hhdElkXS9nZW5lcmF0ZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2NoYXQvW2NoYXRJZF0vZ2VuZXJhdGVcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2NoYXQvW2NoYXRJZF0vZ2VuZXJhdGUvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJjOlxcXFxVc2Vyc1xcXFxtbGVkZFxcXFxDYXNjYWRlUHJvamVjdHNcXFxcbmV4dC1jaGF0Ym90LWZ1bGxzdGFja1xcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxjaGF0XFxcXFtjaGF0SWRdXFxcXGdlbmVyYXRlXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2NoYXQvW2NoYXRJZF0vZ2VuZXJhdGUvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2F%5BchatId%5D%2Fgenerate%2Froute&page=%2Fapi%2Fchat%2F%5BchatId%5D%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2F%5BchatId%5D%2Fgenerate%2Froute.ts&appDir=c%3A%5CUsers%5Cmledd%5CCascadeProjects%5Cnext-chatbot-fullstack%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=c%3A%5CUsers%5Cmledd%5CCascadeProjects%5Cnext-chatbot-fullstack&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/chat/[chatId]/generate/route.ts":
/*!*****************************************************!*\
  !*** ./src/app/api/chat/[chatId]/generate/route.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var _anthropic_ai_sdk__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @anthropic-ai/sdk */ \"(rsc)/./node_modules/@anthropic-ai/sdk/index.mjs\");\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @google/generative-ai */ \"(rsc)/./node_modules/@google/generative-ai/dist/index.mjs\");\n\n\n\n\n\nasync function POST(request, { params }) {\n    try {\n        const { messages, config } = await request.json();\n        console.log(\"Received request:\", {\n            chatId: params.chatId,\n            config,\n            messageCount: messages.length\n        });\n        if (!config.provider || !config.model || !config.apiKey) {\n            console.error(\"Missing configuration:\", {\n                provider: config.provider,\n                model: config.model,\n                hasApiKey: !!config.apiKey\n            });\n            throw new Error(\"Missing required configuration: provider, model, or API key\");\n        }\n        if (!Array.isArray(messages) || messages.length === 0) {\n            console.error(\"Invalid messages:\", messages);\n            throw new Error(\"Invalid or empty messages array\");\n        }\n        // Update chat settings before generating response\n        try {\n            const updatedChat = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__[\"default\"].chat.update({\n                where: {\n                    id: params.chatId\n                },\n                data: {\n                    modelProvider: config.provider,\n                    modelName: config.model,\n                    updatedAt: new Date()\n                }\n            });\n            console.log(\"Updated chat settings:\", updatedChat);\n        } catch (dbError) {\n            console.error(\"Error updating chat settings:\", dbError);\n        }\n        let response;\n        try {\n            switch(config.provider){\n                case \"openai\":\n                    const openai = new openai__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n                        apiKey: config.apiKey\n                    });\n                    if (config.model === \"dall-e-3\") {\n                        const imageResponse = await openai.images.generate({\n                            model: \"dall-e-3\",\n                            prompt: messages[messages.length - 1].content,\n                            n: 1,\n                            size: \"1024x1024\"\n                        });\n                        response = {\n                            content: \"Image generated successfully\",\n                            imageUrl: imageResponse.data[0].url\n                        };\n                    } else {\n                        const openaiMessages = messages.map((m)=>({\n                                role: m.role,\n                                content: m.content\n                            }));\n                        console.log(\"Sending to OpenAI:\", {\n                            model: config.model,\n                            messageCount: openaiMessages.length,\n                            temperature: config.temperature,\n                            maxTokens: config.maxTokens\n                        });\n                        const completion = await openai.chat.completions.create({\n                            messages: openaiMessages,\n                            model: config.model,\n                            temperature: config.temperature || 0.7,\n                            max_tokens: config.maxTokens || 1000\n                        });\n                        if (!completion.choices?.[0]?.message?.content) {\n                            console.error(\"Empty OpenAI response:\", completion);\n                            throw new Error(\"No response generated from OpenAI\");\n                        }\n                        response = {\n                            content: completion.choices[0].message.content,\n                            imageUrl: null\n                        };\n                        console.log(\"OpenAI response:\", response);\n                    }\n                    break;\n                case \"anthropic\":\n                    const anthropic = new _anthropic_ai_sdk__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n                        apiKey: config.apiKey\n                    });\n                    const systemPrompt = messages.find((m)=>m.role === \"system\")?.content || \"\";\n                    const userMessages = messages.filter((m)=>m.role !== \"system\").map((m)=>({\n                            role: m.role === \"user\" ? \"user\" : \"assistant\",\n                            content: m.content\n                        }));\n                    console.log(\"Sending to Anthropic:\", {\n                        model: config.model,\n                        messageCount: userMessages.length,\n                        hasSystemPrompt: !!systemPrompt\n                    });\n                    const anthropicResponse = await anthropic.messages.create({\n                        model: config.model,\n                        max_tokens: config.maxTokens || 1000,\n                        temperature: config.temperature || 0.7,\n                        system: systemPrompt,\n                        messages: userMessages\n                    });\n                    if (!anthropicResponse.content[0]?.text) {\n                        console.error(\"Empty Anthropic response:\", anthropicResponse);\n                        throw new Error(\"No response generated from Anthropic\");\n                    }\n                    response = {\n                        content: anthropicResponse.content[0].text,\n                        imageUrl: null\n                    };\n                    console.log(\"Anthropic response:\", response);\n                    break;\n                case \"google\":\n                    const genAI = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_2__.GoogleGenerativeAI(config.apiKey);\n                    const model = genAI.getGenerativeModel({\n                        model: config.model\n                    });\n                    console.log(\"Sending to Google:\", {\n                        model: config.model,\n                        messageCount: messages.length\n                    });\n                    const googleChat = model.startChat({\n                        history: messages.map((m)=>({\n                                role: m.role,\n                                parts: [\n                                    {\n                                        text: m.content\n                                    }\n                                ]\n                            }))\n                    });\n                    const result = await googleChat.sendMessage(messages[messages.length - 1].content);\n                    const googleResponse = await result.response;\n                    const responseText = googleResponse.text();\n                    if (!responseText) {\n                        console.error(\"Empty Google response:\", googleResponse);\n                        throw new Error(\"No response generated from Google AI\");\n                    }\n                    response = {\n                        content: responseText,\n                        imageUrl: null\n                    };\n                    console.log(\"Google response:\", response);\n                    break;\n                default:\n                    throw new Error(`Unsupported AI provider: ${config.provider}`);\n            }\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(response);\n        } catch (providerError) {\n            console.error(\"Provider-specific error:\", {\n                provider: config.provider,\n                model: config.model,\n                error: providerError,\n                stack: providerError.stack\n            });\n            throw new Error(providerError.message.includes(\"API key\") ? \"Invalid API key. Please check your API key and try again.\" : `Error from ${config.provider}: ${providerError.message}`);\n        }\n    } catch (error) {\n        console.error(\"Error in generate route:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: error.message || \"An unexpected error occurred\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9jaGF0L1tjaGF0SWRdL2dlbmVyYXRlL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUEyQztBQUNUO0FBQ047QUFDYztBQUNpQjtBQU9wRCxlQUFlSyxLQUNwQkMsT0FBZ0IsRUFDaEIsRUFBRUMsTUFBTSxFQUFrQztJQUUxQyxJQUFJO1FBQ0YsTUFBTSxFQUFFQyxRQUFRLEVBQUVDLE1BQU0sRUFBRSxHQUFHLE1BQU1ILFFBQVFJLElBQUk7UUFDL0NDLFFBQVFDLEdBQUcsQ0FBQyxxQkFBcUI7WUFBRUMsUUFBUU4sT0FBT00sTUFBTTtZQUFFSjtZQUFRSyxjQUFjTixTQUFTTyxNQUFNO1FBQUM7UUFFaEcsSUFBSSxDQUFDTixPQUFPTyxRQUFRLElBQUksQ0FBQ1AsT0FBT1EsS0FBSyxJQUFJLENBQUNSLE9BQU9TLE1BQU0sRUFBRTtZQUN2RFAsUUFBUVEsS0FBSyxDQUFDLDBCQUEwQjtnQkFBRUgsVUFBVVAsT0FBT08sUUFBUTtnQkFBRUMsT0FBT1IsT0FBT1EsS0FBSztnQkFBRUcsV0FBVyxDQUFDLENBQUNYLE9BQU9TLE1BQU07WUFBQztZQUNySCxNQUFNLElBQUlHLE1BQU07UUFDbEI7UUFFQSxJQUFJLENBQUNDLE1BQU1DLE9BQU8sQ0FBQ2YsYUFBYUEsU0FBU08sTUFBTSxLQUFLLEdBQUc7WUFDckRKLFFBQVFRLEtBQUssQ0FBQyxxQkFBcUJYO1lBQ25DLE1BQU0sSUFBSWEsTUFBTTtRQUNsQjtRQUVBLGtEQUFrRDtRQUNsRCxJQUFJO1lBQ0YsTUFBTUcsY0FBYyxNQUFNdkIsbURBQU1BLENBQUN3QixJQUFJLENBQUNDLE1BQU0sQ0FBQztnQkFDM0NDLE9BQU87b0JBQUVDLElBQUlyQixPQUFPTSxNQUFNO2dCQUFDO2dCQUMzQmdCLE1BQU07b0JBQ0pDLGVBQWVyQixPQUFPTyxRQUFRO29CQUM5QmUsV0FBV3RCLE9BQU9RLEtBQUs7b0JBQ3ZCZSxXQUFXLElBQUlDO2dCQUNqQjtZQUNGO1lBQ0F0QixRQUFR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Q1RoQyxVQUFVO29CQUNaO29CQUNBakMsUUFBUUMsR0FBRyxDQUFDLG9CQUFvQnVCO29CQUNoQztnQkFFRjtvQkFDRSxNQUFNLElBQUlkLE1BQU0sQ0FBQyx5QkFBeUIsRUFBRVosT0FBT08sUUFBUSxDQUFDLENBQUM7WUFDakU7WUFFQSxPQUFPaEIsa0ZBQVlBLENBQUNVLElBQUksQ0FBQ3lCO1FBQzNCLEVBQUUsT0FBTzBDLGVBQW9CO1lBQzNCbEUsUUFBUVEsS0FBSyxDQUFDLDRCQUE0QjtnQkFDeENILFVBQVVQLE9BQU9PLFFBQVE7Z0JBQ3pCQyxPQUFPUixPQUFPUSxLQUFLO2dCQUNuQkUsT0FBTzBEO2dCQUNQQyxPQUFPRCxjQUFjQyxLQUFLO1lBQzVCO1lBRUEsTUFBTSxJQUFJekQsTUFDUndELGNBQWNwQixPQUFPLENBQUNzQixRQUFRLENBQUMsYUFDM0IsOERBQ0EsQ0FBQyxXQUFXLEVBQUV0RSxPQUFPTyxRQUFRLENBQUMsRUFBRSxFQUFFNkQsY0FBY3BCLE9BQU8sQ0FBQyxDQUFDO1FBRWpFO0lBQ0YsRUFBRSxPQUFPdEMsT0FBWTtRQUNuQlIsUUFBUVEsS0FBSyxDQUFDLDRCQUE0QkE7UUFDMUMsT0FBT25CLGtGQUFZQSxDQUFDVSxJQUFJLENBQ3RCO1lBQUVTLE9BQU9BLE1BQU1zQyxPQUFPLElBQUk7UUFBK0IsR0FDekQ7WUFBRXVCLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1jaGF0Ym90LWZ1bGxzdGFjay8uL3NyYy9hcHAvYXBpL2NoYXQvW2NoYXRJZF0vZ2VuZXJhdGUvcm91dGUudHM/N2QyMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgcHJpc21hIGZyb20gJ0AvbGliL3ByaXNtYSc7XG5pbXBvcnQgT3BlbkFJIGZyb20gJ29wZW5haSc7XG5pbXBvcnQgQW50aHJvcGljIGZyb20gJ0BhbnRocm9waWMtYWkvc2RrJztcbmltcG9ydCB7IEdvb2dsZUdlbmVyYXRpdmVBSSB9IGZyb20gJ0Bnb29nbGUvZ2VuZXJhdGl2ZS1haSc7XG5cbmludGVyZmFjZSBNZXNzYWdlIHtcbiAgcm9sZTogJ3N5c3RlbScgfCAndXNlcicgfCAnYXNzaXN0YW50JztcbiAgY29udGVudDogc3RyaW5nO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChcbiAgcmVxdWVzdDogUmVxdWVzdCxcbiAgeyBwYXJhbXMgfTogeyBwYXJhbXM6IHsgY2hhdElkOiBzdHJpbmcgfSB9XG4pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IG1lc3NhZ2VzLCBjb25maWcgfSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgIGNvbnNvbGUubG9nKCdSZWNlaXZlZCByZXF1ZXN0OicsIHsgY2hhdElkOiBwYXJhbXMuY2hhdElkLCBjb25maWcsIG1lc3NhZ2VDb3VudDogbWVzc2FnZXMubGVuZ3RoIH0pO1xuXG4gICAgaWYgKCFjb25maWcucHJvdmlkZXIgfHwgIWNvbmZpZy5tb2RlbCB8fCAhY29uZmlnLmFwaUtleSkge1xuICAgICAgY29uc29sZS5lcnJvcignTWlzc2luZyBjb25maWd1cmF0aW9uOicsIHsgcHJvdmlkZXI6IGNvbmZpZy5wcm92aWRlciwgbW9kZWw6IGNvbmZpZy5tb2RlbCwgaGFzQXBpS2V5OiAhIWNvbmZpZy5hcGlLZXkgfSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgY29uZmlndXJhdGlvbjogcHJvdmlkZXIsIG1vZGVsLCBvciBBUEkga2V5Jyk7XG4gICAgfVxuXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KG1lc3NhZ2VzKSB8fCBtZXNzYWdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgbWVzc2FnZXM6JywgbWVzc2FnZXMpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIG9yIGVtcHR5IG1lc3NhZ2VzIGFycmF5Jyk7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIGNoYXQgc2V0dGluZ3MgYmVmb3JlIGdlbmVyYXRpbmcgcmVzcG9uc2VcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXBkYXRlZENoYXQgPSBhd2FpdCBwcmlzbWEuY2hhdC51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogcGFyYW1zLmNoYXRJZCB9LFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgbW9kZWxQcm92aWRlcjogY29uZmlnLnByb3ZpZGVyLFxuICAgICAgICAgIG1vZGVsTmFtZTogY29uZmlnLm1vZGVsLFxuICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgY29uc29sZS5sb2coJ1VwZGF0ZWQgY2hhdCBzZXR0aW5nczonLCB1cGRhdGVkQ2hhdCk7XG4gICAgfSBjYXRjaCAoZGJFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgY2hhdCBzZXR0aW5nczonLCBkYkVycm9yKTtcbiAgICB9XG5cbiAgICBsZXQgcmVzcG9uc2U7XG4gICAgdHJ5IHtcbiAgICAgIHN3aXRjaCAoY29uZmlnLnByb3ZpZGVyKSB7XG4gICAgICAgIGNhc2UgJ29wZW5haSc6XG4gICAgICAgICAgY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSSh7XG4gICAgICAgICAgICBhcGlLZXk6IGNvbmZpZy5hcGlLZXksXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZiAoY29uZmlnLm1vZGVsID09PSAnZGFsbC1lLTMnKSB7XG4gICAgICAgICAgICBjb25zdCBpbWFnZVJlc3BvbnNlID0gYXdhaXQgb3BlbmFpLmltYWdlcy5nZW5lcmF0ZSh7XG4gICAgICAgICAgICAgIG1vZGVsOiAnZGFsbC1lLTMnLFxuICAgICAgICAgICAgICBwcm9tcHQ6IG1lc3NhZ2VzW21lc3NhZ2VzLmxlbmd0aCAtIDFdLmNvbnRlbnQsXG4gICAgICAgICAgICAgIG46IDEsXG4gICAgICAgICAgICAgIHNpemU6ICcxMDI0eDEwMjQnLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJlc3BvbnNlID0ge1xuICAgICAgICAgICAgICBjb250ZW50OiAnSW1hZ2UgZ2VuZXJhdGVkIHN1Y2Nlc3NmdWxseScsXG4gICAgICAgICAgICAgIGltYWdlVXJsOiBpbWFnZVJlc3BvbnNlLmRhdGFbMF0udXJsLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgb3BlbmFpTWVzc2FnZXMgPSBtZXNzYWdlcy5tYXAoKG06IE1lc3NhZ2UpID0+ICh7XG4gICAgICAgICAgICAgIHJvbGU6IG0ucm9sZSxcbiAgICAgICAgICAgICAgY29udGVudDogbS5jb250ZW50LFxuICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnU2VuZGluZyB0byBPcGVuQUk6Jywge1xuICAgICAgICAgICAgICBtb2RlbDogY29uZmlnLm1vZGVsLFxuICAgICAgICAgICAgICBtZXNzYWdlQ291bnQ6IG9wZW5haU1lc3NhZ2VzLmxlbmd0aCxcbiAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IGNvbmZpZy50ZW1wZXJhdHVyZSxcbiAgICAgICAgICAgICAgbWF4VG9rZW5zOiBjb25maWcubWF4VG9rZW5zLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRpb24gPSBhd2FpdCBvcGVuYWkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgICAgICAgICAgICBtZXNzYWdlczogb3BlbmFpTWVzc2FnZXMsXG4gICAgICAgICAgICAgIG1vZGVsOiBjb25maWcubW9kZWwsXG4gICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiBjb25maWcudGVtcGVyYXR1cmUgfHwgMC43LFxuICAgICAgICAgICAgICBtYXhfdG9rZW5zOiBjb25maWcubWF4VG9rZW5zIHx8IDEwMDAsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKCFjb21wbGV0aW9uLmNob2ljZXM/LlswXT8ubWVzc2FnZT8uY29udGVudCkge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFbXB0eSBPcGVuQUkgcmVzcG9uc2U6JywgY29tcGxldGlvbik7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gcmVzcG9uc2UgZ2VuZXJhdGVkIGZyb20gT3BlbkFJJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlc3BvbnNlID0ge1xuICAgICAgICAgICAgICBjb250ZW50OiBjb21wbGV0aW9uLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50LFxuICAgICAgICAgICAgICBpbWFnZVVybDogbnVsbCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnT3BlbkFJIHJlc3BvbnNlOicsIHJlc3BvbnNlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnYW50aHJvcGljJzpcbiAgICAgICAgICBjb25zdCBhbnRocm9waWMgPSBuZXcgQW50aHJvcGljKHtcbiAgICAgICAgICAgIGFwaUtleTogY29uZmlnLmFwaUtleSxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNvbnN0IHN5c3RlbVByb21wdCA9IG1lc3NhZ2VzLmZpbmQobSA9PiBtLnJvbGUgPT09ICdzeXN0ZW0nKT8uY29udGVudCB8fCAnJztcbiAgICAgICAgICBjb25zdCB1c2VyTWVzc2FnZXMgPSBtZXNzYWdlc1xuICAgICAgICAgICAgLmZpbHRlcihtID0+IG0ucm9sZSAhPT0gJ3N5c3RlbScpXG4gICAgICAgICAgICAubWFwKG0gPT4gKHtcbiAgICAgICAgICAgICAgcm9sZTogbS5yb2xlID09PSAndXNlcicgPyAndXNlcicgOiAnYXNzaXN0YW50JyxcbiAgICAgICAgICAgICAgY29udGVudDogbS5jb250ZW50LFxuICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgY29uc29sZS5sb2coJ1NlbmRpbmcgdG8gQW50aHJvcGljOicsIHtcbiAgICAgICAgICAgIG1vZGVsOiBjb25maWcubW9kZWwsXG4gICAgICAgICAgICBtZXNzYWdlQ291bnQ6IHVzZXJNZXNzYWdlcy5sZW5ndGgsXG4gICAgICAgICAgICBoYXNTeXN0ZW1Qcm9tcHQ6ICEhc3lzdGVtUHJvbXB0LFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY29uc3QgYW50aHJvcGljUmVzcG9uc2UgPSBhd2FpdCBhbnRocm9waWMubWVzc2FnZXMuY3JlYXRlKHtcbiAgICAgICAgICAgIG1vZGVsOiBjb25maWcubW9kZWwsXG4gICAgICAgICAgICBtYXhfdG9rZW5zOiBjb25maWcubWF4VG9rZW5zIHx8IDEwMDAsXG4gICAgICAgICAgICB0ZW1wZXJhdHVyZTogY29uZmlnLnRlbXBlcmF0dXJlIHx8IDAuNyxcbiAgICAgICAgICAgIHN5c3RlbTogc3lzdGVtUHJvbXB0LFxuICAgICAgICAgICAgbWVzc2FnZXM6IHVzZXJNZXNzYWdlcyxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmICghYW50aHJvcGljUmVzcG9uc2UuY29udGVudFswXT8udGV4dCkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRW1wdHkgQW50aHJvcGljIHJlc3BvbnNlOicsIGFudGhyb3BpY1Jlc3BvbnNlKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gcmVzcG9uc2UgZ2VuZXJhdGVkIGZyb20gQW50aHJvcGljJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICBjb250ZW50OiBhbnRocm9waWNSZXNwb25zZS5jb250ZW50WzBdLnRleHQsXG4gICAgICAgICAgICBpbWFnZVVybDogbnVsbCxcbiAgICAgICAgICB9O1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdBbnRocm9waWMgcmVzcG9uc2U6JywgcmVzcG9uc2UpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ2dvb2dsZSc6XG4gICAgICAgICAgY29uc3QgZ2VuQUkgPSBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJKGNvbmZpZy5hcGlLZXkpO1xuICAgICAgICAgIGNvbnN0IG1vZGVsID0gZ2VuQUkuZ2V0R2VuZXJhdGl2ZU1vZGVsKHsgbW9kZWw6IGNvbmZpZy5tb2RlbCB9KTtcblxuICAgICAgICAgIGNvbnNvbGUubG9nKCdTZW5kaW5nIHRvIEdvb2dsZTonLCB7XG4gICAgICAgICAgICBtb2RlbDogY29uZmlnLm1vZGVsLFxuICAgICAgICAgICAgbWVzc2FnZUNvdW50OiBtZXNzYWdlcy5sZW5ndGgsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjb25zdCBnb29nbGVDaGF0ID0gbW9kZWwuc3RhcnRDaGF0KHtcbiAgICAgICAgICAgIGhpc3Rvcnk6IG1lc3NhZ2VzLm1hcChtID0+ICh7XG4gICAgICAgICAgICAgIHJvbGU6IG0ucm9sZSxcbiAgICAgICAgICAgICAgcGFydHM6IFt7IHRleHQ6IG0uY29udGVudCB9XSxcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdvb2dsZUNoYXQuc2VuZE1lc3NhZ2UobWVzc2FnZXNbbWVzc2FnZXMubGVuZ3RoIC0gMV0uY29udGVudCk7XG4gICAgICAgICAgY29uc3QgZ29vZ2xlUmVzcG9uc2UgPSBhd2FpdCByZXN1bHQucmVzcG9uc2U7XG4gICAgICAgICAgY29uc3QgcmVzcG9uc2VUZXh0ID0gZ29vZ2xlUmVzcG9uc2UudGV4dCgpO1xuXG4gICAgICAgICAgaWYgKCFyZXNwb25zZVRleHQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0VtcHR5IEdvb2dsZSByZXNwb25zZTonLCBnb29nbGVSZXNwb25zZSk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHJlc3BvbnNlIGdlbmVyYXRlZCBmcm9tIEdvb2dsZSBBSScpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJlc3BvbnNlID0ge1xuICAgICAgICAgICAgY29udGVudDogcmVzcG9uc2VUZXh0LFxuICAgICAgICAgICAgaW1hZ2VVcmw6IG51bGwsXG4gICAgICAgICAgfTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnR29vZ2xlIHJlc3BvbnNlOicsIHJlc3BvbnNlKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgQUkgcHJvdmlkZXI6ICR7Y29uZmlnLnByb3ZpZGVyfWApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ocmVzcG9uc2UpO1xuICAgIH0gY2F0Y2ggKHByb3ZpZGVyRXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignUHJvdmlkZXItc3BlY2lmaWMgZXJyb3I6Jywge1xuICAgICAgICBwcm92aWRlcjogY29uZmlnLnByb3ZpZGVyLFxuICAgICAgICBtb2RlbDogY29uZmlnLm1vZGVsLFxuICAgICAgICBlcnJvcjogcHJvdmlkZXJFcnJvcixcbiAgICAgICAgc3RhY2s6IHByb3ZpZGVyRXJyb3Iuc3RhY2ssXG4gICAgICB9KTtcblxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBwcm92aWRlckVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0FQSSBrZXknKVxuICAgICAgICAgID8gJ0ludmFsaWQgQVBJIGtleS4gUGxlYXNlIGNoZWNrIHlvdXIgQVBJIGtleSBhbmQgdHJ5IGFnYWluLidcbiAgICAgICAgICA6IGBFcnJvciBmcm9tICR7Y29uZmlnLnByb3ZpZGVyfTogJHtwcm92aWRlckVycm9yLm1lc3NhZ2V9YFxuICAgICAgKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBnZW5lcmF0ZSByb3V0ZTonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAnQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZCcgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJwcmlzbWEiLCJPcGVuQUkiLCJBbnRocm9waWMiLCJHb29nbGVHZW5lcmF0aXZlQUkiLCJQT1NUIiwicmVxdWVzdCIsInBhcmFtcyIsIm1lc3NhZ2VzIiwiY29uZmlnIiwianNvbiIsImNvbnNvbGUiLCJsb2ciLCJjaGF0SWQiLCJtZXNzYWdlQ291bnQiLCJsZW5ndGgiLCJwcm92aWRlciIsIm1vZGVsIiwiYXBpS2V5IiwiZXJyb3IiLCJoYXNBcGlLZXkiLCJFcnJvciIsIkFycmF5IiwiaXNBcnJheSIsInVwZGF0ZWRDaGF0IiwiY2hhdCIsInVwZGF0ZSIsIndoZXJlIiwiaWQiLCJkYXRhIiwibW9kZWxQcm92aWRlciIsIm1vZGVsTmFtZSIsInVwZGF0ZWRBdCIsIkRhdGUiLCJkYkVycm9yIiwicmVzcG9uc2UiLCJvcGVuYWkiLCJpbWFnZVJlc3BvbnNlIiwiaW1hZ2VzIiwiZ2VuZXJhdGUiLCJwcm9tcHQiLCJjb250ZW50IiwibiIsInNpemUiLCJpbWFnZVVybCIsInVybCIsIm9wZW5haU1lc3NhZ2VzIiwibWFwIiwibSIsInJvbGUiLCJ0ZW1wZXJhdHVyZSIsIm1heFRva2VucyIsImNvbXBsZXRpb24iLCJjb21wbGV0aW9ucyIsImNyZWF0ZSIsIm1heF90b2tlbnMiLCJjaG9pY2VzIiwibWVzc2FnZSIsImFudGhyb3BpYyIsInN5c3RlbVByb21wdCIsImZpbmQiLCJ1c2VyTWVzc2FnZXMiLCJmaWx0ZXIiLCJoYXNTeXN0ZW1Qcm9tcHQiLCJhbnRocm9waWNSZXNwb25zZSIsInN5c3RlbSIsInRleHQiLCJnZW5BSSIsImdldEdlbmVyYXRpdmVNb2RlbCIsImdvb2dsZUNoYXQiLCJzdGFydENoYXQiLCJoaXN0b3J5IiwicGFydHMiLCJyZXN1bHQiLCJzZW5kTWVzc2FnZSIsImdvb2dsZVJlc3BvbnNlIiwicmVzcG9uc2VUZXh0IiwicHJvdmlkZXJFcnJvciIsInN0YWNrIiwiaW5jbHVkZXMiLCJzdGF0dXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/chat/[chatId]/generate/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = global;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log: [\n        \"query\",\n        \"error\",\n        \"warn\"\n    ]\n});\nif (true) globalForPrisma.prisma = prisma;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQThDO0FBRTlDLE1BQU1DLGtCQUFrQkM7QUFJakIsTUFBTUMsU0FDWEYsZ0JBQWdCRSxNQUFNLElBQ3RCLElBQUlILHdEQUFZQSxDQUFDO0lBQ2ZJLEtBQUs7UUFBQztRQUFTO1FBQVM7S0FBTztBQUNqQyxHQUFHO0FBRUwsSUFBSUMsSUFBeUIsRUFBY0osZ0JBQWdCRSxNQUFNLEdBQUdBO0FBRXBFLGlFQUFlQSxNQUFNQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1jaGF0Ym90LWZ1bGxzdGFjay8uL3NyYy9saWIvcHJpc21hLnRzPzAxZDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xuXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWwgYXMgdW5rbm93biBhcyB7XG4gIHByaXNtYTogUHJpc21hQ2xpZW50IHwgdW5kZWZpbmVkO1xufTtcblxuZXhwb3J0IGNvbnN0IHByaXNtYSA9XG4gIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPz9cbiAgbmV3IFByaXNtYUNsaWVudCh7XG4gICAgbG9nOiBbJ3F1ZXJ5JywgJ2Vycm9yJywgJ3dhcm4nXSxcbiAgfSk7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID0gcHJpc21hO1xuXG5leHBvcnQgZGVmYXVsdCBwcmlzbWE7XG4iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsIiwicHJpc21hIiwibG9nIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/formdata-node","vendor-chunks/openai","vendor-chunks/@anthropic-ai","vendor-chunks/form-data-encoder","vendor-chunks/whatwg-url","vendor-chunks/agentkeepalive","vendor-chunks/tr46","vendor-chunks/web-streams-polyfill","vendor-chunks/node-fetch","vendor-chunks/@google","vendor-chunks/webidl-conversions","vendor-chunks/ms","vendor-chunks/humanize-ms","vendor-chunks/event-target-shim","vendor-chunks/abort-controller"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2F%5BchatId%5D%2Fgenerate%2Froute&page=%2Fapi%2Fchat%2F%5BchatId%5D%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2F%5BchatId%5D%2Fgenerate%2Froute.ts&appDir=c%3A%5CUsers%5Cmledd%5CCascadeProjects%5Cnext-chatbot-fullstack%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=c%3A%5CUsers%5Cmledd%5CCascadeProjects%5Cnext-chatbot-fullstack&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();